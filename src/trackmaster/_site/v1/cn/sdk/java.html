<h1 id='trackmaster_api_java_sdk'>TrackMaster API Java SDK</h1>

<h3 id='clientjava'>示例类(client.java)</h3>

<pre class='prettyprint'><code>import java.io.*;
import java.net.*;

public class client{
    URL url;
    String urlStr;
    HttpURLConnection conn;
    BufferedReader reader;
    String line;
    String result = &quot;&quot;;

    public client(String urlToRead){
        urlStr = urlToRead;
    }

    public String get(String param) {

        try {
            url = new URL(urlStr + param);
            conn = (HttpURLConnection) url.openConnection();
            conn.setRequestMethod(&quot;GET&quot;);
            conn.setRequestProperty(&quot;User-Agent&quot;, &quot;TrackMaster-SDK-JAVA&quot;);
            reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            while ((line = reader.readLine()) != null) {
                result += line;
            }
            reader.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
   }

    public String post(String param, String json) {

        try {
            url = new URL(urlStr + param);
            conn = (HttpURLConnection) url.openConnection();
            conn.setDoOutput(true);
            conn.setDoInput(true);
            conn.setInstanceFollowRedirects(false);
            conn.setRequestMethod(&quot;POST&quot;);
            conn.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);
            conn.setRequestProperty(&quot;User-Agent&quot;, &quot;TrackMaster-SDK-JAVA&quot;);
            conn.setRequestProperty(&quot;charset&quot;, &quot;utf-8&quot;);
            conn.setRequestProperty(&quot;Content-Length&quot;, &quot;&quot; + Integer.toString(json.getBytes().length));
            conn.setUseCaches (false);
            OutputStreamWriter writer = new OutputStreamWriter(conn.getOutputStream());
            writer.write(json);
            writer.flush();
            reader = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            while ((line = reader.readLine()) != null) {
                result += line;
            }
            writer.close();
            reader.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return result;
    }
}</code></pre>

<h3 id='access_tokenmymainjava'>获取当前用户/获取当前用户网络/获取access_token(myMain.java)</h3>

<pre class='prettyprint'><code>class myMain{
    public static void main(String args[])
   {
       client apiClient = new client(&quot;http://track.admasterapi.com&quot;);
       String access_token = &quot;您的access token&quot;;
       System.out.println(apiClient.get(&quot;/user?access_token=&quot; + access_token)); // 获取用户信息
       System.out.println(apiClient.get(&quot;/user/networks?access_token=&quot; + access_token)); // 获取用户网络信息

       // 构造json，格式为{&quot;client_id&quot;:&quot;aaa&quot;,&quot;client_secrect&quot;:&quot;bbb&quot;,&quot;grant_type&quot;: &quot;ccc&quot;,&quot;email&quot;:&quot;ddd&quot;,&quot;password&quot;:&quot;eee&quot;}
       String client_id = &quot;\&quot;您的client_id\&quot;&quot;;
       String client_secret = &quot;\&quot;您的client_secrect\&quot;&quot;;
       String grant_type = &quot;\&quot;password\&quot;&quot;;
       String password = &quot;\&quot;您的密码\&quot;&quot;;
       String email = &quot;\&quot;您的邮箱\&quot;&quot;;
       String json = &quot;{\&quot;client_id\&quot;:&quot; + client_id
           + &quot;,\&quot;client_secret\&quot;:&quot; + client_secret
           + &quot;,\&quot;grant_type\&quot;:&quot; + grant_type
           + &quot;,\&quot;email\&quot;:&quot; +email
           + &quot;,\&quot;password\&quot;:&quot; +password+&quot;}&quot;;

       client openClient = new client(&quot;http://open.admaster.com.cn&quot;);

       System.out.println(openClient.post(&quot;/oauth/access_token&quot;, json)); // 获取access_token
   }
}</code></pre>