<h1 id='trackmaster_api_nodejs_sdk'>TrackMaster API Node.js SDK</h1>

<pre class='prettyprint'><code>(function() {
  var TrackmasterClient, http;

  http = require(&#39;http&#39;);

  TrackmasterClient = (function() {

    function TrackmasterClient(host, port) {
      if (port == null) {
        port = 80;
      }
      this.host = host;
      this.port = port;
      this.error = null;
    }

    TrackmasterClient.prototype.get = function(path, callback) {
      return this.req(&quot;GET&quot;, path, null, callback);
    };

    TrackmasterClient.prototype.post = function(path, data, callback) {
      return this.req(&quot;POST&quot;, path, data, callback);
    };

    TrackmasterClient.prototype.put = function(path, data, callback) {
      return this.req(&quot;PUT&quot;, path, data, callback);
    };

    TrackmasterClient.prototype[&quot;delete&quot;] = function(path, callback) {
      return this.req(&quot;DELETE&quot;, path, null, callback);
    };

    TrackmasterClient.prototype.req = function(method, path, data, callback) {
      var options, req;
      options = {
        hostname: this.host,
        port: this.port,
        path: path,
        method: method
      };
      req = http.request(options, callback);
      req.on(&quot;error&quot;, function(e) {
        return this.error = e;
      });
      if (data) {
        req.write(data);
      }
      return req.end();
    };

    return TrackmasterClient;

  })();

}).call(this);</code></pre>

<h3 id='access_token'>获取access_token</h3>

<pre class='prettyprint'><code>  var json = JSON.stringify({
    &quot;client_id&quot;: &quot;***&quot;,
    &quot;client_secret&quot;: &quot;***&quot;,
    &quot;grant_type&quot;: &quot;password&quot;,
    &quot;email&quot;: &quot;***&quot;,
    &quot;password&quot;: &quot;***&quot;
  });

  var callback = function(res) {
    console.log(&quot;STATUS: &quot; + res.statusCode);
    console.log(&quot;HEADERS: &quot; + JSON.stringify(res.headers));
    res.setEncoding(&quot;utf8&quot;);
    return res.on(&quot;data&quot;, function(chunk) {
      return console.log(&quot;BODY: &quot; + chunk);
    });
  };

  var client = new TrackmasterClient(&quot;open.admaster.com.cn&quot;);
  client.post(&quot;/oauth/access_token&quot;, json, callback);</code></pre>

<h3 id='id114'>获取当前用户</h3>

<pre class='prettyprint'><code>var client = new TrackmasterClient(&quot;track.admasterapi.com&quot;);
client.get(&quot;/user?access_token=***&quot;, callback);</code></pre>

<h3 id='id115'>获取当前用户网络</h3>

<pre class='prettyprint'><code>client.get(&quot;/user/networks?access_token=***&quot;, callback);</code></pre>